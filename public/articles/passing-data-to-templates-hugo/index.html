<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
    
    <title>Passing data to templates and tables in Hugo | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.</title>
    <meta name="title" content="Passing data to templates and tables in Hugo | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.">
    
    <meta name="description" content="Using data files to generate lists and tables, which can then be managed and updated from Git-backed Forestry CMS.">
    <meta name="keywords" content="Data Engineering, Data Science, AI, Analytics, Design, UX, UI, Product">
    <meta http-equiv="content-language" content="en" />
    
    <meta property="og:title" content="Passing data to templates and tables in Hugo | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.">
    <meta property="og:description" content="Using data files to generate lists and tables, which can then be managed and updated from Git-backed Forestry CMS.">
    <meta property="og:site_name" content="Passing data to templates and tables in Hugo | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://azharkhan.in/articles/passing-data-to-templates-hugo/">
    
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://azharkhan.in/articles/passing-data-to-templates-hugo/">
    <meta property="twitter:title" content="Passing data to templates and tables in Hugo - Azhar Khan">
    <meta property="twitter:description" content=" Using data files to generate lists and tables, which can then be managed and updated from Git-backed Forestry CMS. Blog posts on code and design by github.com/XOR97">
    <link rel="canonical" href="https://azharkhan.in/articles/passing-data-to-templates-hugo/">
    
    
    
    <meta name="p:domain_verify" content="c60dc1e9be844be29f0fb5525b9afe6f"/>
    
    <meta name="google-site-verification" content="9G-wiIrmxQgDxbcs3a3xPW--q3Mxb1VGFN7BsEfJdDk" />
    
    <meta name="pinterest" content="nopin" />
        
    <meta name="author" content="Azhar Khan">
    <link href="mailto:azhar932@icloud.com" rel="me">
    <link href="https://twitter.com/Azhr_K_" rel="me">
    <link href="https://github.com/XOR97" rel="me">
    <link href="https://www.linkedin.com/in/azhar93/" rel="me">
    
    <link rel="webmention" href="https://webmention.io/harrycresswell.com/webmention" />
    <link rel="pingback" href="https://webmention.io/harrycresswell.com/xmlrpc" />
    
    
      
      
       
      
      
      <link rel="stylesheet" href="https://azharkhan.in/css/main.min.bf08fe8d86332cb842d75cf7df24b0b53fd52f2d350e68cea9eea8bdf244050b.css" integrity="sha256-vwj&#43;jYYzLLhC11z33ySwtT/VLy01DmjOqe6ovfJEBQs=" media="screen">
    
    
    <link rel="apple-touch-icon" href="https://azharkhan.in/img/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="https://azharkhan.in/img/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="https://azharkhan.in/img/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="shortcut icon" href="https://azharkhan.in/img/favicon.ico" type="image/x-icon">
    
    </head>
	<body class="Wrapper h-card">
  <a class="skip-link" href="#main-content">Skip to main content</a>
  <header class="Header">
    <div class="Title">
      <a class="p-name u-url" rel="me" href="https://azharkhan.in/">Azhar Khan</a>
      <div hidden>
          <img class="u-photo" src="https://harrycresswell.com/img/hc.jpg" alt="Harry Cresswell">
          <p class="p-note">Azhar Khan is an independent data engineer and developer from Ottawa, Canada.</p>
          <a href="mailto:studio@harrycresswell.com" rel="me" class="u-email">studio@harrycresswell.com</a>
      </div>
    </div>
    <nav class="Nav" aria-label="Main Navigation">
      <ul class="Nav-list">
       
        
        <li class="Nav-listItem">
          <a class="Nav-listItemLink" href="/articles/">Articles</a>
        </li>
      
        <li class="Nav-listItem">
          <a class="Nav-listItemLink" href="/notes/">Notes</a>
        </li>
      
        <li class="Nav-listItem">
          <a class="Nav-listItemLink" href="/tags/">Tags</a>
        </li>
      
      </ul>
    </nav>
  </header>

    <main id="main-content" class="Container">
    
      
  <article id="content" class="Post h-entry">

      <header class="PostHeader">
          <h1 class="PostHeader-title p-name">Passing data to templates and tables in Hugo</h1>
      </header>
    
      <section class="PostMeta">
        <time class="PostMeta-date dt-published" datetime="2020-05-15 08:44:48 &#43;0100 &#43;0100">Fri, May 15, 2020</time> —
        
<div class="PostMeta-tags">
    <div class="PostMeta-tag">
      
      
        <a href="/tags/hugo" class="p-category">Hugo</a>
      
    </div>
</div>

      </section>

      <section class="PostBody e-content">
        <p>It often makes sense to abstract large datasets away from your templates and into their own files. This keeps your templates concise and easy to manage.</p>
<p>You can store this type of data in the <a href="https://gohugo.io/templates/data-templates/#the-data-folder">Data folder</a> at the root of your Hugo project, as either JSON, Yaml or Toml files. You can then pull this additional data into your templates and use it however you wish.</p>
<p>This article looks at two approaches to consuming data in Hugo templates. The first approach uses the <a href="https://gohugo.io/functions/range/#readout">range</a> function to display a list of data in a form select. Whilst the second approach looks at creating an <a href="https://gohugo.io/functions/index-function/#readout">index</a> of data, as a way to extract specific values in your dataset and render those values as data in an HTML table.</p>
<h2 id="ranging-through-data">Ranging through data&nbsp;<a class="heading-anchor" href="#ranging-through-data" aria-label="Anchor">#</a> </h2>
<p>In a recent client project, I had to create a form select for every country organised by continent. This was essentially just a list of each and every country name.</p>
<p>Rather than add this dataset directly to my template, I outsourced it to several <code>.yaml</code> files, which split the countries of the world by continent. Each file was organised alphabetically by country name and each continent file was stored in the data directory, at the root of the Hugo project.</p>
<p>To get an idea of what this looks like, here’s the structure of the data directory.</p>
<pre><code>└── countries
  └── continent
    ├── africa.yaml
    ├── asia.yaml
    ├── europe.yaml
    └── northamerica.yaml
    └── southamerica.yaml
</code></pre><p>Within each <code>.yaml</code> file, my data was represented in the the same format. Consider <code>southamerica.yaml</code> to get an idea of the format.</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">country</span><span class="p">:</span><span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Argentina<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Bolivia<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Brazil<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Chile<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Colombia<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Ecuador<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Guyana<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Paraguay<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Peru<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Uruguay<span class="w">
</span><span class="w">  </span>- <span class="k">name</span><span class="p">:</span><span class="w"> </span>Venezuela<span class="w">
</span></code></pre></div><p>Inside my template I then used the range function to loop through every country and display the name of each country as an option in the form select.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">{{ range .Site.Data.countries.continent.southamerica.country }}
<span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">select</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;south-america&#34;</span> <span class="p">/&gt;</span>
   <span class="p">&lt;</span><span class="nt">option</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;{{ .name }}&#34;</span><span class="p">&gt;</span>{{ .name }}<span class="p">&lt;/</span><span class="nt">option</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">select</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
{{ end }}
</code></pre></div><p>This is a great way to simplify your templates. In this particular case it prevents the need to have to enter each country manually inside an option tag.</p>
<p>For a smaller dataset you may choose to do this by hand, directly inside the template. But there are disadvantages to this.</p>
<p>First, there’s no way of editing hard coded values unless you dig into the template itself. This writes of the idea of making changes via a CMS, which a non-coding site administrator can manage.</p>
<p>Second, I’d argue it’s much easier to maintain a separate <code>.yaml</code> file for storing larger datasets like this one. The idea of combing through a bunch of HTML inside a template to add and update values by hand doesn’t exactly fill me with joy. Whatsamore it’s more fiddly and time consuming.</p>
<p>Now let’s turn our focus to tabular data.</p>
<h2 id="tabular-data">Tabular data&nbsp;<a class="heading-anchor" href="#tabular-data" aria-label="Anchor">#</a> </h2>
<p>More recently I was faced with a slightly different problem. This time it involved rendering data inside a table, which could then be updated by my client.</p>
<p><a href="http://lauralucas.london/">Laura</a> is a personal trainer, who offers one-on-one training sessions and group sessions for a maximum of two people. These sessions are offered as a package of either 1 session, 5 sessions or 10 sessions.</p>
<p>We needed a way to add this data to a table and display a breakdown of the total price, the price per session, and the price per session per person (based on two people sharing the session).</p>
<p>If that sounds confusing, well it kind of is. It took me far longer than I care to admit to make sense of the data.</p>
<p>So to make the data easier to visualise, have a quick look at <a href="https://lauralucas.london/prices/">Laura’s pricing page</a> to see the final outcome of what we’re trying to achieve.</p>
<p>Laura also needed a way to update these prices via a CMS. <a href="https://forestry.io/">Forestry</a> makes this step easy, but more on that bit later. For now, let’s focus on the data structure.</p>
<p>To structure the data in a suitable way, first I created a two yaml files in the data directory. One called <code>prices_for_one.yaml</code> and one called <code>prices_for_two.yaml</code>. Both files followed the exact same data format.</p>
<p>To give you an idea of what the format looked like, here’s the <code>prices_for_two.yaml</code> file:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="k">one_session</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">total_price</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£85&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">price_per_session</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;-&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">price_per_session_per_person</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£42.5&#34;</span><span class="w">
</span><span class="w"></span><span class="k">five_sessions</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">total_price</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£370&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">price_per_session</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£74&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">price_per_session_per_person</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£37&#34;</span><span class="w">
</span><span class="w"></span><span class="k">ten_sessions</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="k">total_price</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£670&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">price_per_session</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£67&#34;</span><span class="w">
</span><span class="w">  </span><span class="k">price_per_session_per_person</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;£33.5&#34;</span><span class="w">
</span></code></pre></div><p>This dataset differs slightly from the first example, where listed countries by continent. You will have noticed the main bulk of data is nested under different parent keys.</p>
<p>These three different parent keys represent each session package (one_session, five_sessions and ten_session) and each parent has three nested child data key value pairs associated with it. Each parent key is unique, but the nested keys are the same for each parent key.</p>
<p>So how might you access this data from a template file?</p>
<p>You could range through the child key data from your template file like this:</p>
<pre><code>{{ range $.Site.Data.prices }}
  {{ .total_price }}
{{ end }}
</code></pre><p>In this case <a href="https://gohugo.io/functions/range/#readout">range</a> would loop through all the <code>.total_price</code> keys and return their values:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml">£<span class="m">65</span><span class="w">
</span><span class="w"></span>£<span class="m">290</span><span class="w">
</span><span class="w"></span>£<span class="m">540</span><span class="w">
</span></code></pre></div><p>Likewise, we can do the same for the other keys:</p>
<pre><code>{{ range $.Site.Data.prices }}
  {{ .price_per_session }}
{{ end }}
</code></pre><p>And return those values:</p>
<div class="highlight"><pre class="chroma"><code class="language-yaml" data-lang="yaml">-<span class="w">
</span><span class="w"></span>£<span class="m">58</span><span class="w">
</span><span class="w"></span>£<span class="m">54</span><span class="w">
</span></code></pre></div><p>However, when it comes to tables, ranging through a set of data might not be the best option. It becomes apparent why, when we add the HTML markup to create the table.</p>
<p>The obvious thing to do would be to think of this much like an unordered list and using range to list out the data in <code>&lt;td&gt;’s</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    {{ range $.Site.Data.prices }}
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ .price_per_session }}
    <span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ end }}
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div><p>But of course unless you change the fundamental layout of a table with CSS, table rows display inline by default. This would cause our three session prices to flow horizontally across the table in a single row. <a href="https://lauralucas.london/prices/">If you remember</a> isn’t how we want to represent the data.</p>
<p>Consider how the generated HTML would look if we used range on the <code>price_per_session</code> as above. Hugo would create three <code>&lt;td&gt;’s</code> in a single table row containing the price per session.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>-<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>£58<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>£54<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div><p>Not quite what we’re looking for.</p>
<p>Whilst there are ways to achieve what we want using a range method, an easier approach might be to target an <a href="https://gohugo.io/functions/index-function/#readout">index</a> of each set of session data.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
  {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
  $prices_for_two &#34;one_session&#34; }}
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
  {{ end }}
<span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
</code></pre></div><p>First we target the <code>prices_for_two</code> data and assign it to a variable. Next we create an index of the <code>one_session</code> data within the dataset and the target each key within the index.</p>
<p>Now we can access the specific nested keys value and return their value directly into the corresponding table data cell.</p>
<p>We can use the exact same code for each session package and just update the index to target the right session package each time.</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
    $prices_for_two &#34;one_session&#34; }}
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ end }}
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
    $prices_for_two &#34;five_sessions&#34; }}
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ end }}
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
    $prices_for_two &#34;ten_sessions&#34; }}
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
    {{ end }}
  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
</code></pre></div><p>The complete table looks like this:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Session(s)<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Total price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Price per session<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Price per session, per person<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
      $prices_for_two &#34;one_session&#34; }}
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ end }}
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
      $prices_for_two &#34;five_sessions&#34; }}
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ end }}
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ $prices_for_two := .Site.Data.prices_for_two }} {{ with index
      $prices_for_two &#34;ten_sessions&#34; }}
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ end }}
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div><p>Ok. So it’s not the fewest lines of code we’ve ever written, but the solution works and it’s pretty easy to understand what’s going on.</p>
<p>For my particular needs, I created another table for the <code>prices_for_one.yaml</code> data and updated all instances of <code>prices_for_two</code> to <code>prices_for_one</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">table</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">thead</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Session(s)<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Total price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Price per session<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Price per session, per person<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">thead</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">tbody</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>1<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ $prices_for_one := .Site.Data.prices_for_one }} {{ with index
      $prices_for_one &#34;one_session&#34; }}
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ end }}
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>5<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ $prices_for_one := .Site.Data.prices_for_one }} {{ with index
      $prices_for_one &#34;five_sessions&#34; }}
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ end }}
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>10<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ $prices_for_one := .Site.Data.prices_for_one }} {{ with index
      $prices_for_one &#34;ten_sessions&#34; }}
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .total_price }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>{{ .price_per_session_per_person }}<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>
      {{ end }}
    <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">tbody</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>
</code></pre></div><p>The only thing left to do from here was to use some CSS to create a tabbed table, which was made accessible through clever use of radio buttons.</p>
<p>To make this happen, I built a quick <a href="https://codepen.io/harrycresswell/pen/zYxgeLJ">Codepen prototype</a>, taking most of my inspiration from <a href="https://kyusuf.com/post/completely-css-tabs/">this fantastic article by Kenan Yusuf</a>.</p>
<p>Now we’re at the final hurdle. We need to make it possible to edit the pricing datain our table without having to dig into the data directory and edit <code>.yaml</code> files. This will make the data nice and easy to update and maintain.</p>
<p>This is where Forestry CMS comes in.</p>
<h2 id="setting-up-forestry-front-matter-for-use-with-table-data">Setting up Forestry front matter for use with table data&nbsp;<a class="heading-anchor" href="#setting-up-forestry-front-matter-for-use-with-table-data" aria-label="Anchor">#</a> </h2>
<p>With your code deployed to Github or a similar remote repository, the first step is to link your repository to <a href="https://forestry.io/">Forestry CMS</a>.</p>
<p>From your Forestry dashboard click <strong>Add Site</strong>, select <strong>Hugo</strong> and choose the <strong>Version</strong> you have installed on your machine.</p>
<p>If you are unsure which version of Hugo you are running, from the command line run the following command to find out:</p>
<pre><code>hugo version
</code></pre><p>Next, back in Forestry, set your <strong>Git provider</strong> and choose the <strong>Repository</strong> you wish to connect, making sure the branch is set to <strong>Master</strong>.</p>
<p>Forestry will then import your website.</p>
<h3 id="create-a-front-matter-template">Create a front matter template&nbsp;<a class="heading-anchor" href="#create-a-front-matter-template" aria-label="Anchor">#</a> </h3>
<p>Now create a new front matter template to represent the pricing data structure. To do this click <strong>Front Matter</strong> in the Sidebar of your site from within Forestry, then click the <strong>Add Template</strong> button. Call it something descriptive like <em>Pricing</em> or <em>Prices</em>.</p>
<p>Select <strong>Create based on existing document</strong> then select either <code>prices_for_one.yaml</code> or <code>prices_for_two.yaml</code>. It doesn’t matter which one you choose, as both are the exact same structure.</p>
<p>Forestry will now autogenerate the template form fields based on the document, saving us from having to set this up from scratch.</p>
<h3 id="configure-the-sidebar">Configure the sidebar&nbsp;<a class="heading-anchor" href="#configure-the-sidebar" aria-label="Anchor">#</a> </h3>
<p>The final step is to configure the sidebar in your Forestry site settings, to show the two pricing <code>yaml</code> files stored in the data directory.</p>
<p>Go to <em>Settings</em>, then <em>Sidebar</em> and click <strong>Add Section</strong>. Select <strong>Directory</strong> and add a <strong>Label</strong> to identify the two files. Calling it <em>Data</em> is probably a good idea.</p>
<p>Then in the <em>Importing Content</em> section, set <strong>Content Directory</strong> to <code>data</code>. This tell Forestry to add content from the data directory.</p>
<p>Make sure <strong>File Match</strong> is set to <code>**/*</code>, then in the <em>Creating Content</em> section make sure <strong>Content Types</strong> is set to <code>Nothing</code>.</p>
<p>Finally, in the <em>Available Templates</em> section select the <em>Pricing</em> template we made earlier. Click <strong>Save</strong> and you should now see your data directory in the sidebar.</p>
<h2 id="editing-content-in-forestry">Editing content in Forestry&nbsp;<a class="heading-anchor" href="#editing-content-in-forestry" aria-label="Anchor">#</a> </h2>
<p>Now everything should be set up correctly, so you can jump into Forestry any time. Just head to <strong>Data</strong> in the sidebar, select either <code>prices_for_one.yaml</code> or <code>prices_for_two.yaml</code> – depending on which you want to edit – then make the necessary changes.</p>
<p>When you click <strong>Save</strong>, Forestry will push the changes directly to your Git repository.</p>
<p>If you are using a tool like <a href="https://www.netlify.com/">Netlify</a>, then auto-deploying your site is made trivial. When Forestry updates your Git Repository, Netlify will spot the changes and deploy a new version of your site, updating the content in the process.</p>
<h2 id="wrapping-up">Wrapping up&nbsp;<a class="heading-anchor" href="#wrapping-up" aria-label="Anchor">#</a> </h2>
<p>Using the data directory is a great way to bring custom datasets into your Hugo site, which may not directly relate to a content type in your content directory.</p>
<p>By abstracting this data away from the templates which use it, we can keep our templates concise and avoid hardcoding values. This is useful if we want to make the data editable via a CMS.</p>
<p>Using data files to render options in a form select or cells in a table are just two ways to consume data, but there are many more things we could do with data.</p>
<p>Currently data can only be consumed in templates, as demonstrated in this article. You can’t yet use data to generate standalone page content, which is a shame. But, I believe there are conversations happening about adding this as a future feature. It would make working with data in Hugo even more powerful.</p>
<p><em>If you have questions, you can reach me on <a href="https://twitter.com/harrycresswell">Twitter</a>. If you spot any mistakes or factual inaccuracies, please <a href="https://github.com/harrycresswell/harry/issues">file a GitHub issue</a>.</em></p>
<h2 id="resources">Resources&nbsp;<a class="heading-anchor" href="#resources" aria-label="Anchor">#</a> </h2>
<ul>
<li><a href="https://gohugo.io/templates/data-templates/">Data templates</a></li>
<li><a href="https://discourse.gohugo.io/t/getting-specific-data-in-a-range/11597">Getting specific data in a range</a></li>
<li><a href="https://www.youtube.com/watch?v=cdLNKUoMc6c">YAML | In One Video</a> from Mike Dane</li>
<li><a href="https://discourse.gohugo.io/t/extracting-specific-value-from-a-nested-json-data-file/21973">Extracting Specific Value from a Nested JSON Data File</a></li>
</ul>

        
<div class="PostAuthor">
  <img alt="Harry Cresswell" class="Avatar Avatar--round Avatar--m u-photo" src="https://harrycresswell.com/img/hc.jpg">
  <div class="PostAuthor-text">
    <h4>Did you enjoy this?</h4>
    <p>Sign up for my newsletter below &darr;</p>
  </div>
</div>


<div hidden>
  <a class="u-url" href="https://azharkhan.in/articles/accessibility-checking-writing-mac-os/">Accessibility check your writing on macOS</a>
  <p class="h-card p-author">
    <a class="p-name u-url" href="https://azharkhan.in/" rel="author">Harry Cresswell</a>
    <img alt="Harry Cresswell" class="u-photo" src="https://harrycresswell.com/img/hc.jpg">
  </p>
</div>
      </section>

  </article>


    </main>

    <section class="Newsletter" id="braintactics">
    <h3 class="Newsletter-title">Weekly Newsletter</h3>
    <p><a href="/newsletter/">Braintactics</a> is a weekly roundup of articles, tools and tips for product designers and front-end developers. I send it every Friday morning.</p>

    <form class="NewsletterForm validate" action="https://harrycresswell.us14.list-manage.com/subscribe/post?u=4e8fba8d0ab4a857159c0104e&amp;id=d6ad2b65ca" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate>
        
        <div class="NewsletterForm-field">
            <label class="NewsletterForm-label" for="name">
            First Name
            </label>
            <input class="NewsletterForm-input" id="name" name="NAME" placeholder="e.g. Harry" type="text">
        </div>

        <div class="NewsletterForm-field">
            <label class="NewsletterForm-label" for="email">
            Email Address
            </label>
            <input class="NewsletterForm-input" id="email" name="EMAIL" placeholder="e.g. harry@gmail.com" type="email">
        </div>
        <div class="NewsletterForm-field">
        
            
            <input class="u-visually-hidden" name="LOCATION" value="Passing data to templates and tables in Hugo" type="hidden" id="mce-LOCATION">
            
        
            <div class="Form-options" style="display:none">
                <strong>Product </strong>
                <ul>
                    <li>
                        <input type="checkbox" value="4" name="group[6417][4]" id="mce-group[6417]-6417-0" checked>
                        <label for="mce-group[6417]-6417-0">Braintactics</label>
                    </li>
                    <li>
                        <input type="checkbox" value="8" name="group[6417][8]" id="mce-group[6417]-6417-1">
                        <label for="mce-group[6417]-6417-1">DS in Sketch</label>
                    </li>
                </ul>
            </div>
            <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
            </div>
            
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
                <label for="b_4e8fba8d0ab4a857159c0104e_d6ad2b65ca">Prevent bot signups</label>
                <input type="text" name="b_4e8fba8d0ab4a857159c0104e_d6ad2b65ca" tabindex="-1" value="">
            </div>

            <div class="NewsletterForm-button">
                <label class="NewsletterForm-label u-visually-hidden" for="subscribe">Subscribe</label>
                <input class="Button Button--primary" name="subscribe" type="submit" value="Subscribe">
            </div>
        </div>
    </form>
</section>

  <footer class="Footer" role="contentinfo">
    <nav class="FooterNav" aria-label="Footer Navigation">
      
      
      <a class="FooterNav-link"
        href="/articles/">Articles</a>
      
      <a class="FooterNav-link"
        href="/notes/">Notes</a>
      
      <a class="FooterNav-link"
        href="/tags/">Tags</a>
      
    </nav>
    <p>Content &copy;2020 Harry Cresswell, unless otherwise specified. Subscribe to RSS Feeds for <a
        href="https://azharkhan.in/feed.xml">all content</a>, <a
        href="https://azharkhan.in/articles/feed.xml">articles</a> or <a
        href="https://azharkhan.in/notes/feed.xml">notes</a>.</p>
  </footer>

  
  
  
  

  
  
  
  
  
  
  
  
  
  
  <script src="https://azharkhan.in/app.min.633fdaa2db6cbb9888b8f7ce0cb9fff72b593e1c71be0f9a84142171ddb816a5.js" integrity="sha256-Yz/aottsu5iIuPfODLn/9ytZPhxxvg&#43;ahBQhcd24FqU=" media="screen"></script>
  <script>
    var cl = cloudinary.Cloudinary.new({
      cloud_name: "harrycresswell"
    });

    cl.responsive();
  </script>
  </body>

  </html>