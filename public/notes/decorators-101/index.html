<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
    
    <title>Decorators 101 | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.</title>
    <meta name="title" content="Decorators 101 | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.">
    
    <meta name="description" content="A design pattern in Python that allows a user to add new functionality to an existing object without modifying its structure.">
    <meta name="keywords" content="Data Engineering, Data Science, AI, Analytics, Design, UX, UI, Product">
    <meta http-equiv="content-language" content="en" />
    
    <meta property="og:title" content="Decorators 101 | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.">
    <meta property="og:description" content="A design pattern in Python that allows a user to add new functionality to an existing object without modifying its structure.">
    <meta property="og:site_name" content="Decorators 101 | Azhar Khan &middot; Azhar Khan is an independent data engineer and developer from Ottawa, Canada.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://azharkhan.in/notes/decorators-101/">
    
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://azharkhan.in/notes/decorators-101/">
    <meta property="twitter:title" content="Decorators 101 - Azhar Khan">
    <meta property="twitter:description" content=" A design pattern in Python that allows a user to add new functionality to an existing object without modifying its structure. Blog posts on code and design by github.com/XOR97">
    <link rel="canonical" href="https://azharkhan.in/notes/decorators-101/">
    
    
    
    <meta name="p:domain_verify" content="c60dc1e9be844be29f0fb5525b9afe6f"/>
    
    <meta name="google-site-verification" content="9G-wiIrmxQgDxbcs3a3xPW--q3Mxb1VGFN7BsEfJdDk" />
    
    <meta name="pinterest" content="nopin" />
    
    <meta name="author" content="Azhar Khan">
    <link href="mailto:azhar932@icloud.com" rel="me">
    <link href="https://twitter.com/Azhr_K_" rel="me">
    <link href="https://github.com/XOR97" rel="me">
    <link href="https://www.linkedin.com/in/azhar93/" rel="me">
    
    <link rel="webmention" href="https://webmention.io/harrycresswell.com/webmention" />
    <link rel="pingback" href="https://webmention.io/harrycresswell.com/xmlrpc" />
    
    
      
      
       
      
      
      <link rel="stylesheet" href="https://azharkhan.in/css/main.min.bf08fe8d86332cb842d75cf7df24b0b53fd52f2d350e68cea9eea8bdf244050b.css" integrity="sha256-vwj&#43;jYYzLLhC11z33ySwtT/VLy01DmjOqe6ovfJEBQs=" media="screen">
    
    
    <link rel="apple-touch-icon" href="https://azharkhan.in/img/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" href="https://azharkhan.in/img/favicon-32x32.png" sizes="32x32" type="image/png">
    <link rel="icon" href="https://azharkhan.in/img/favicon-16x16.png" sizes="16x16" type="image/png">
    <link rel="shortcut icon" href="https://azharkhan.in/img/favicon.ico" type="image/x-icon">
    
    </head>
	<body class="Wrapper h-card">
  <a class="skip-link" href="#main-content">Skip to main content</a>
  <header class="Header">
    <div class="Title">
      <a class="p-name u-url" rel="me" href="https://azharkhan.in/">Azhar Khan</a>
      <div hidden>
          <img class="u-photo" src="https://azharkhan.in/img/hc.jpg" alt="Azhar Khan">
          <p class="p-note">Azhar Khan is an independent data engineer and developer from Ottawa, Canada.</p>
          <a href="mailto:akhan362@uottawa.ca" rel="me" class="u-email">akhan362@uottawa.ca</a>
      </div>
    </div>
    <nav class="Nav" aria-label="Main Navigation">
      <ul class="Nav-list">
       
        
        <li class="Nav-listItem">
          <a class="Nav-listItemLink" href="/articles/">Articles</a>
        </li>
      
        <li class="Nav-listItem">
          <a class="Nav-listItemLink" href="/notes/">Notes</a>
        </li>
      
        <li class="Nav-listItem">
          <a class="Nav-listItemLink" href="/tags/">Tags</a>
        </li>
      
      </ul>
    </nav>
  </header>


    <main id="main-content" class="Container">

      
  <article id="content" class="Post h-entry">

      <header class="PostHeader">
          <h1 class="PostHeader-title p-name">Decorators 101</h1>
      </header>

      <section class="PostMeta">
        <time class="PostMeta-date dt-published">Mon, Dec 11, 2017</time> —
        
<div class="PostMeta-tags">
    <div class="PostMeta-tag">
      
      
        <a href="/tags/python" class="p-category">Python</a>
      
    </div>
</div>

      </section>

      <section class="PostBody e-content">
        <p>In this article we will try to understand,</p>
<ul>
<li>
<p>What is a decorator?</p>
</li>
<li>
<p>How decorators work?</p>
</li>
<li>
<p>How to create your own decorators in Python</p>
</li>
</ul>
<p>To understand decorators in Python we should know what are functions in Python.</p>
<p>In Python, everything is object. Functions in Python are first-class objects which means that they can be referenced by a variable, added in the lists, passed as arguments to another function etc.</p>
<h3 id="functions-can-be-referred-by-variables">Functions can be referred by variables&nbsp;<a class="heading-anchor" href="#functions-can-be-referred-by-variables" aria-label="Anchor">#</a> </h3>
<p>Basic function in Python:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">)</span>

<span class="c1"># say_hello() Output: Hello</span>
</code></pre></div><p>We can make another variable <code>say_hello2</code> to refer to <code>say_hello</code> function as shown below:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="n">say_hello2</span> <span class="o">=</span> <span class="n">say_hello</span>

<span class="k">print</span><span class="p">(</span><span class="n">say_hello2</span><span class="p">())</span> <span class="c1"># Output: Hello</span>
</code></pre></div><p>With the above statement <code>say_hello2</code> and <code>say_hello</code> are pointing to the same function definition, and execution of both will produce same result</p>
<h3 id="functions-can-be-passed-as-arguments-to-another-function">Functions can be passed as arguments to another function&nbsp;<a class="heading-anchor" href="#functions-can-be-passed-as-arguments-to-another-function" aria-label="Anchor">#</a> </h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">say_hi_func</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">)</span>

  <span class="n">say_hi_func</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">say_hi</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hi&#34;</span><span class="p">)</span>

<span class="n">say_hello</span><span class="p">(</span><span class="n">say_hi</span><span class="p">)</span> <span class="c1">#Output:   Hello</span>
            <span class="c1">#          Hi</span>
</code></pre></div><p>In the above example, we have passed <code>say_hi</code> function as an argument to <code>say_hello</code> function. <code>say_hi</code> is referenced by <code>say_hi_func</code> variable. Inside <code>say_hello</code>, <code>say_hi_func</code> is called which references <code>say_hi</code> and it prints “Hi”.</p>
<h3 id="functions-can-be-defined-inside-another-function">Functions can be defined inside another function&nbsp;<a class="heading-anchor" href="#functions-can-be-defined-inside-another-function" aria-label="Anchor">#</a> </h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">say_hi</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hi&#34;</span><span class="p">)</span>

  <span class="n">say_hi</span><span class="p">()</span>  

<span class="n">say_hello</span><span class="p">()</span> <span class="c1"># Output: Hello</span>
            <span class="c1">#         Hi</span>

<span class="n">say_hi</span><span class="p">()</span> <span class="c1"># Gives error  </span>
</code></pre></div><p>In the above example, <code>say_hi</code> function has been defined inside <code>say_hello</code> function. It is valid in python. When we call function <code>say_hello</code>, <code>say_hi</code> function gets defined inside <code>say_hello</code> function and it is called inside <code>say_hello()</code> function.
If we try to call <code>say_hi</code> outside <code>say_hello</code> function, Python will give error because <code>say_hi</code> does not exists outside of <code>say_hello</code> function.</p>
<h3 id="functions-can-return-references-to-another-function">Functions can return references to another function&nbsp;<a class="heading-anchor" href="#functions-can-return-references-to-another-function" aria-label="Anchor">#</a> </h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">say_hi</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hi&#34;</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">say_hi</span>

<span class="n">say_hi_func</span> <span class="o">=</span> <span class="n">say_hello</span><span class="p">()</span> <span class="c1"># Prints Hello and returns say_hi function which gets stored in variable say_hi_func</span>

<span class="n">say_hi_func</span><span class="p">()</span> <span class="c1"># By say_hi function is refered by say_hi_func variable so calling say_hi_func will call say_hi.</span>
              <span class="c1"># It will print Hi</span>
</code></pre></div><p>In the above example, <code>say_hello</code> function returns a reference for <code>say_hi</code> function. Returned function reference is assigned to <code>say_hi_func</code>. Thus <code>say_hi_func</code> also starts pointing to <code>say_hi</code> function.</p>
<p>Another example with function arguments</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">hello_var</span><span class="p">):</span>
  <span class="k">print</span><span class="p">(</span><span class="n">hello_var</span><span class="p">)</span>

  <span class="k">def</span> <span class="nf">say_hi</span><span class="p">(</span><span class="n">hi_var</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">hello_var</span> <span class="o">+</span> <span class="s2">&#34; &#34;</span> <span class="o">+</span> <span class="n">hi_var</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">say_hi</span>

<span class="n">say_hi_func</span> <span class="o">=</span> <span class="n">say_hello</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">)</span> <span class="c1"># Print Hello and returns say_hi function which gets stored in say_hi_func variable</span>

<span class="n">say_hi_func</span><span class="p">(</span><span class="s2">&#34;Hi&#34;</span><span class="p">)</span> <span class="c1"># Call say_hi function and print &#34;Hello Hi&#34;</span>
</code></pre></div><p>Variable <code>hello_var</code> is accessed even outside the <code>say_hello</code> function because <code>say_hi</code> function was defined inside <code>say_hello</code> function so it can access all the variables of <code>say_hello</code> function. This is called as closure.</p>
<p>With the understanding of functions, now let’s understand decorators.</p>
<h2 id="decorators">Decorators&nbsp;<a class="heading-anchor" href="#decorators" aria-label="Anchor">#</a> </h2>
<p><!-- raw HTML omitted -->Decorators are callable objects which are used to modify functions or classes.<!-- raw HTML omitted --></p>
<p>Callable objects are objects which accepts some arguments and returns some objects. functions and classes are examples of callable objects in Python.</p>
<p>Function decorators are functions which accepts function references as arguments and adds a wrapper around them and returns the function with the wrapper as a new function.</p>
<p>Let’s see this with an example:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">decorator_func</span><span class="p">(</span><span class="n">some_func</span><span class="p">):</span>
  <span class="c1"># define another wrapper function which modifies some_func</span>
  <span class="k">def</span> <span class="nf">wrapper_func</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Wrapper function started&#34;</span><span class="p">)</span>

    <span class="n">some_func</span><span class="p">()</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&#34;Wrapper function ended&#34;</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">wrapper_func</span> <span class="c1"># Wrapper function add something to the passed function and decorator returns the wrapper function</span>

<span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
  <span class="k">print</span> <span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">)</span>

<span class="n">say_hello</span> <span class="o">=</span> <span class="n">decorator_func</span><span class="p">(</span><span class="n">say_hello</span><span class="p">)</span>

<span class="n">say_hello</span><span class="p">()</span>

<span class="c1"># Output:</span>
<span class="c1">#  Wrapper function started</span>
<span class="c1">#  Hello</span>
<span class="c1">#  Wrapper function started</span>
</code></pre></div><p>In the above example, <code>decorator_func</code> is the decorator function which accepts <code>some_func</code>, a function object, as an argument. It defines a <code>wrapper_func</code> which calls <code>some_func</code> but it also executes some code of it’s own.</p>
<p>This <code>wrapper_func</code> is returned by our decorator function and it’s stored in <code>say_hello</code> variable. Thus now <code>say_hello</code> refers to <code>wrapper_func</code> which has some extra code apart from calling the function which was passed as argument. Thus in another way we can say that, decorator function modified our <code>say_hello</code> function and added some extra lines of code in it. This is what decorator are. The output is the modified <code>say_hello</code> function with extra print statments</p>
<h3 id="python-syntax-for-decorator">Python syntax for decorator&nbsp;<a class="heading-anchor" href="#python-syntax-for-decorator" aria-label="Anchor">#</a> </h3>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="nd">@decorator_func</span>
<span class="k">def</span> <span class="nf">say_hell</span><span class="p">():</span>
    <span class="k">print</span> <span class="s1">&#39;Hello&#39;</span>
</code></pre></div><p>The above statements is equivalent to</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
    <span class="k">print</span> <span class="s1">&#39;Hello&#39;</span>
<span class="n">say_hello</span> <span class="o">=</span> <span class="n">deocrator_func</span><span class="p">(</span><span class="n">say_hello</span><span class="p">)</span>
</code></pre></div><p>Here, decorator_func will added some code on top of the <code>say_hello</code> function and will return the modified function or the wrapper function.</p>
<h3 id="functions-with-arguments-and-decorators">Functions with arguments and decorators&nbsp;<a class="heading-anchor" href="#functions-with-arguments-and-decorators" aria-label="Anchor">#</a> </h3>
<p>Consider the below example for function with parameters and decorators:</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">decorator_func</span><span class="p">(</span><span class="n">say_hello_func</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">wrapper_func</span><span class="p">(</span><span class="n">hello_var</span><span class="p">,</span> <span class="n">world_var</span><span class="p">):</span>
    <span class="n">hello</span> <span class="o">=</span> <span class="s2">&#34;Hello, &#34;</span>
    <span class="n">world</span> <span class="o">=</span> <span class="s2">&#34;World&#34;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">hello_var</span><span class="p">:</span>
      <span class="n">hello_var</span> <span class="o">=</span> <span class="n">hello</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">world_var</span><span class="p">:</span>
      <span class="n">world_var</span> <span class="o">=</span> <span class="n">world</span>

    <span class="k">return</span> <span class="n">say_hello_func</span><span class="p">(</span><span class="n">hello_var</span><span class="p">,</span> <span class="n">world_var</span><span class="p">)</span>

  <span class="k">return</span> <span class="n">wrapper_func</span>

<span class="nd">@decorator_func</span>
<span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">hello_var</span><span class="p">,</span> <span class="n">world_var</span><span class="p">):</span>
  <span class="k">print</span> <span class="n">hello_var</span> <span class="o">+</span> <span class="s2">&#34; &#34;</span> <span class="o">+</span> <span class="n">world_var</span>

<span class="n">say_hello</span><span class="p">(</span><span class="s2">&#34;Hello&#34;</span><span class="p">,</span> <span class="s2">&#34;&#34;</span><span class="p">)</span>
</code></pre></div><p>Here, we have defined <code>say_hello</code> function with two arguments and <code>@decorator_func</code>. Inner function of <code>decorator_func</code> i.e. <code>wrapper_func</code> must take exactly the same number of argument as <code>say_hello</code> function.
Here. <code>@decorators_func</code> validates if the passed parameters are not empty and none, if they are, it calls <code>say_hello</code> function with default arguments.</p>
 
      </section>

      <footer>
      
<div class="PostAuthor">
  <img alt="Azhar Khan" class="Avatar Avatar--round Avatar--m u-photo" src="https://azharkhan.in/img/hc.jpg">
  <div class="PostAuthor-text">
    <h4>Did you enjoy this?</h4>
    <p>If so, you can always help me <a href="https://www.paypal.me/azhrkhn">buy</a> my morning coffee.</p>
  </div>
</div>


<div hidden>
  <a class="u-url" href="https://azharkhan.in/articles/accessibility-checking-writing-mac-os/">Accessibility check your writing on macOS</a>
  <p class="h-card p-author">
    <a class="p-name u-url" href="https://azharkhan.in/" rel="author">Azhar Khan</a>
    <img alt="Azhar Khan" class="u-photo" src="https://azharkhan.in/img/hc.jpg">
  </p>
</div>

      </footer>

  </article>


    </main>

    

  <footer class="Footer" role="contentinfo">
    <nav class="FooterNav" aria-label="Footer Navigation">
      
      
    </nav>
    <p>Content &copy;2020 Azhar Khan, unless otherwise specified.
  </footer>

  
  
  
  

  
  
  
  
  
  
  
  
  
  
  <script src="https://azharkhan.in/app.min.633fdaa2db6cbb9888b8f7ce0cb9fff72b593e1c71be0f9a84142171ddb816a5.js" integrity="sha256-Yz/aottsu5iIuPfODLn/9ytZPhxxvg&#43;ahBQhcd24FqU=" media="screen"></script>
  <script>
    var cl = cloudinary.Cloudinary.new({
      cloud_name: "azhar932"
    });

    cl.responsive();
  </script>
  </body>

  </html>

